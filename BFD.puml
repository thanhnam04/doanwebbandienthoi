@startuml Business Flow Diagram - Smartphone E-commerce System

title Business Flow Diagram - Smartphone E-commerce System

' === BUYER FUNCTIONALITIES ===

start

:Người mua hàng truy cập website;

:Đăng nhập tài khoản (optional);

if (Đã đăng nhập?) then (Yes)
    :Xem giỏ hàng hiện tại;
else (No)
endif

:Người mua xem thông tin hàng hoá;
note right
    - Tên sản phẩm
    - Giá bán
    - Số lượng tồn kho
    - Thông số kỹ thuật
end note

if (Tìm kiếm hàng hoá?) then (Yes)
    :Nhập từ khóa tìm kiếm;
    :Hiển thị kết quả tìm kiếm;
else (No)
endif

if (Lọc hàng hoá?) then (Yes)
    :Chọn bộ lọc;
    note right
        - Theo giá bán
        - Theo tên sản phẩm
        - Theo hãng
    end note
    :Hiển thị kết quả lọc;
else (No)
endif

:Chọn sản phẩm muốn mua;
:Thêm vào giỏ hàng;

if (Thực hiện mua hàng?) then (Yes)
    :Xem giỏ hàng;
    :Xác nhận thông tin đơn hàng và thanh toán;
    :Đặt hàng thành công;
    note right
        Đơn hàng có trạng thái:
        - Chờ duyệt
    end note
else (No)
endif

:Theo dõi trạng thái đơn hàng;

' === ADMIN FUNCTIONALITIES ===

partition "Nhân viên bán hàng (Admin)" {

    :Admin đăng nhập hệ thống;

    if (Quản lý đơn hàng?) then (Yes)

        :Xem danh sách đơn hàng;
        note right
            - Mã đơn hàng
            - Thông tin khách hàng
            - Danh sách sản phẩm
            - Tổng tiền
            - Trạng thái (Pending-Đã giao hàng)
        end note

        if (Duyệt đơn hàng?) then (Yes)
            :Chọn đơn hàng cần duyệt;
            :Kiểm tra tồn kho sản phẩm;

            if (Đủ tồn kho?) then (Yes)
                :Cập nhật trạng thái: "Đã giao hàng";
                :Giảm số lượng sản phẩm trong kho;
                note right
                    Số lượng tồn kho -= số lượng đặt
                end note
                :Gửi thông báo cho khách hàng;
            else (No)
                :Thông báo không đủ hàng;
                :Hủy đơn hàng;
            endif

        elseif (Hủy đơn hàng?) then (Yes)
            :Chọn đơn hàng cần hủy;
            :Cập nhật trạng thái: "Đã hủy";
            :Hoàn trả số lượng sản phẩm về kho;
            note right
                Số lượng tồn kho += số lượng đã đặt
            end note
            :Gửi thông báo cho khách hàng;
        endif

        if (In hóa đơn?) then (Yes)
            :Chọn đơn hàng đã duyệt;
            :Tạo và in hóa đơn bán hàng;
            :Lưu trữ hóa đơn;
        endif

        if (Xem hóa đơn theo thời gian?) then (Yes)
            :Chọn khoảng thời gian;
            :Hiển thị danh sách hóa đơn;
            :Xuất báo cáo nếu cần;
        endif

    elseif (Quản lý sản phẩm?) then (Yes)

        if (Thêm sản phẩm?) then (Yes)
            :Nhập thông tin sản phẩm mới;
            note right
                - Mã sản phẩm
                - Tên sản phẩm
                - Hãng sản xuất
                - Giá bán
                - Số lượng tồn kho
                - Thông số kỹ thuật
            end note
            :Upload hình ảnh;
            :Lưu vào cơ sở dữ liệu;
        endif

        if (Sửa sản phẩm?) then (Yes)
            :Chọn sản phẩm cần sửa;
            :Cập nhật thông tin;
            :Lưu thay đổi;
        endif

        if (Xóa sản phẩm?) then (Yes)
            :Chọn sản phẩm cần xóa;
            :Xác nhận xóa;
            :Xóa khỏi cơ sở dữ liệu;
        endif

    elseif (Xem thống kê, báo cáo?) then (Yes)

        :Xem báo cáo bán hàng;
        note right
            - Tổng số đơn hàng
            - Tổng doanh thu
            - Số lượng khách hàng
            - Thống kê theo hãng
        end note

        :Xuất báo cáo theo thời gian;
        :Hiển thị biểu đồ thống kê;

    endif

}

' === STOCK MANAGEMENT LOGIC ===

partition "Quản lý tồn kho" {

    :Kiểm tra số lượng tồn kho;
    note right
        Khi duyệt đơn hàng:
        - Giảm số lượng tồn kho
        - Cập nhật database

        Khi hủy đơn hàng:
        - Tăng số lượng tồn kho
        - Hoàn trả hàng về kho
    end note

    if (Số lượng tồn kho < ngưỡng tối thiểu?) then (Yes)
        :Cảnh báo nhập hàng;
        :Gửi thông báo cho admin;
    endif

}

stop

@enduml
